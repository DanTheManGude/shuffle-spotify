{"version":3,"sources":["Components/Main.js","Components/App.js","index.js"],"names":["Main","props","access_token","hashItems","useState","responseCode","setResponseCode","className","onClick","fetch","method","headers","Accept","Authorization","body","then","response","status","catch","console","error","requestAuth","window","location","href","App","authorization","log","urlSearchParams","URLSearchParams","search","Object","fromEntries","entries","hasOwnProperty","hash","substr","split","reduce","acc","element","parts","calculateAuthorization","ReactDOM","render","StrictMode","id","document","getElementById","process"],"mappings":"uMAwCeA,MArCf,SAAcC,GACZ,IACeC,EACXD,EADFE,UAAaD,aAGf,EAAwCE,mBAAS,MAAjD,mBAAOC,EAAP,KAAqBC,EAArB,KAEA,OACE,gCACE,wBACEC,UAAU,gBACVC,QAAS,WACPC,MAAM,0DAA2D,CAC/DC,OAAQ,MACRC,QAAS,CACPC,OAAQ,mBACR,eAAgB,mBAChBC,cAAc,UAAD,OAAYX,IAE3BY,KAAM,KAELC,MAAK,SAACC,GAAD,OAAcV,EAAgBU,EAASC,WAC5CC,MAAMC,QAAQC,QAbrB,8BAkBCf,IACmB,MAAjBA,EACC,mBAAGE,UAAU,sBAAb,qDAEA,mBAAGA,UAAU,oBAAb,sDC/BJc,EAAc,WAClBC,OAAOC,SAASC,KAAhB,sPAmDaC,MArBf,WACE,IAAMC,EA5BuB,WAC7BP,QAAQQ,IAAIL,OAAOC,UAEnB,IAAMK,EAAkB,IAAIC,gBAAgBP,OAAOC,SAASO,QAE5D,GADeC,OAAOC,YAAYJ,EAAgBK,WACvCC,eAAe,SACxB,OAAQ,EAGV,IAAKZ,OAAOC,SAASY,KACnB,OAAO,EAGT,IAAMhC,EAAYmB,OAAOC,SAASY,KAC/BC,OAAO,GACPC,MAAM,KACNC,QAAO,SAACC,EAAKC,GACZ,IAAMC,EAAQD,EAAQH,MAAM,KAE5B,OADAE,EAAIE,EAAM,IAAMA,EAAM,GACfF,IACN,IAEL,OAAIpC,EAAU+B,eAAe,gBACpB/B,OADT,EAMsBuC,GAEtB,OAAuB,IAAnBhB,EACK,mBAAGnB,UAAU,oBAAb,oDAGa,IAAlBmB,EAEA,gCACE,mBAAGnB,UAAU,UAAb,+CACA,wBAAQA,UAAU,qBAAqBC,QAASa,EAAhD,sBAOC,cAAC,EAAD,CAAMlB,UAAWuB,K,MC9C1BiB,IAASC,OACP,eAAC,IAAMC,WAAP,WACE,oBAAIC,GAAG,QAAP,6BACA,oBAAIA,GAAG,WAAP,wEACA,cAAC,EAAD,OAEFC,SAASC,eAAe,SAG1B7B,QAAQQ,IAAR,oBAAyBsB,+C","file":"static/js/main.a4ee2482.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport * as PropTypes from \"prop-types\";\n\nfunction Main(props) {\n  const {\n    hashItems: { access_token },\n  } = props;\n\n  const [responseCode, setResponseCode] = useState(null);\n\n  return (\n    <div>\n      <button\n        className=\"shuffleButton\"\n        onClick={() => {\n          fetch(\"https://api.spotify.com/v1/me/player/shuffle?state=true\", {\n            method: \"PUT\",\n            headers: {\n              Accept: \"application/json\",\n              \"Content-Type\": \"application/json\",\n              Authorization: `Bearer ${access_token}`,\n            },\n            body: \"\",\n          })\n            .then((response) => setResponseCode(response.status))\n            .catch(console.error);\n        }}\n      >\n        Activate Shuffle\n      </button>\n      {responseCode &&\n        (responseCode === 204 ? (\n          <p className=\"regText successText\">Yay, your playback has been shuffled :)</p>\n        ) : (\n          <p className=\"regText errorText\">It looks like there was an error :(</p>\n        ))}\n    </div>\n  );\n}\n\nexport default Main;\n\nMain.propTypes = {\n  hashItems: PropTypes.object.isRequired,\n};\n","import React from \"react\";\nimport Main from \"./Main\";\n\nconst requestAuth = () => {\n  window.location.href = `https://accounts.spotify.com/authorize?client_id=ffe90abde69148bbbd6e4a1e372c0097&redirect_uri=https:%2F%2Fdangude.com%2Fshuffle-spotify&scope=user-read-private%20user-read-email%20user-modify-playback-state&response_type=token&state=20210212`;\n};\n\nconst calculateAuthorization = () => {\n  console.log(window.location);\n\n  const urlSearchParams = new URLSearchParams(window.location.search);\n  const params = Object.fromEntries(urlSearchParams.entries());\n  if (params.hasOwnProperty(\"error\")) {\n    return -1;\n  }\n\n  if (!window.location.hash) {\n    return 0;\n  }\n\n  const hashItems = window.location.hash\n    .substr(1)\n    .split(\"&\")\n    .reduce((acc, element) => {\n      const parts = element.split(\"=\");\n      acc[parts[0]] = parts[1];\n      return acc;\n    }, {});\n\n  if (hashItems.hasOwnProperty(\"access_token\")) {\n    return hashItems;\n  }\n};\n\nfunction App() {\n  const authorization = calculateAuthorization();\n\n  if (authorization === -1) {\n    return <p className=\"regText errorText\">Sorry, it looks like an error occurred</p>;\n  }\n\n  if (authorization === 0) {\n    return (\n      <div>\n        <p className=\"regText\">Please login below to use the app</p>\n        <button className=\"regText authButton\" onClick={requestAuth}>\n          Login\n        </button>\n      </div>\n    );\n  }\n\n  return <Main hashItems={authorization} />;\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./Components/App\";\nimport \"./index.css\";\n//import reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <h1 id=\"title\">Shuffle Spotify</h1>\n    <h3 id=\"subtitle\">Activates shuffle for what you are listening to on Spotify</h3>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\nconsole.log(`Git hash: ${process.env.REACT_APP_VERSION}`);\n\n//reportWebVitals();\n"],"sourceRoot":""}